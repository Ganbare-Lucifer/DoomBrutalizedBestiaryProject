//ACTOR FrostElemental replaces PainElemental
ACTOR FrostElemental : PainElemental

{ 
  	Health 525
	Radius 31
	Height 56
	Mass 400
    Scale 1.2
	Speed 11
	PainChance 128
	PainChance "Stun", 255
	Monster
	+FLOAT 
	+NOGRAVITY
	+MissileMore
	SeeSound "frost/sight"
	damagefactor "Avoid", 0.0
	damagefactor "killme", 0.0
	damagefactor "GibRemoving", 0.0
	PainSound "frost/pain"
	DeathSound "frost/death"
	ActiveSound "frost/active"
    bloodtype "GreenBloodTrails"
	DropItem "DemonStrengthRune" 5
	damagefactor "TeleportRemover", 0.0
	DamageFactor "CauseObjectsToSplash", 0.0
	DamageType "Freeze"
	DamageFactor "Ice", 0.0
	DamageFactor "Freeze", 0.0//THE BASTARD CAN'T BE KILLED BY THE FREEZER
	DamageFactor "Fire", 1.45 //KILL IT WITH FIRE
	DamageFactor "Flames", 1.45 //KILL IT WITH FIRE
	PainChance "Kick", 255
	damagefactor "Avoid", 0.0
	damagefactor "Blood", 0.0 damagefactor "BlueBlood", 0.0 damagefactor "GreenBlood", 0.0
	damagefactor "killme", 0.0
    damagetype Flames
   Obituary "%o was frozen by a Frost Elemental."
    BloodType "Blue_Blood", "BlueSawBlood", "BlueSawBlood"
   DropItem "Demonpickup" 168
   
   Species "FlyingBalls"
	Tag "Frost Elemental"
    +DONTHARMSPECIES
   
   States 
   {
   
   Death.Blackhole:
		TNT1 A 0 A_Scream
        TNT1 A 0 A_NoBlocking
        TNT1 A 0 A_SpawnItem("BlackHoledPainElemental")
		Stop
   
   ReplaceVanilla:
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_ChangeFlag("COUNTKILL", 0)
		TNT1 A 0 A_SpawnItemEx ("Vanilla_FrostElemental",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION |SXF_TRANSFERSPECIAL| SXF_TRANSFERAMBUSHFLAG ,0)
		Stop
	
	Spawn:
//	TNT1 A 0 ACS_ExecuteAlways(796, 0, 0, 0, 0)//Check if Vanilla Mode is activated
	  TNT1 AAA 0
      FREL A 10 A_Look
      Goto Spawn+2
   See:
      FREL AABBCC 3 A_Chase
      Loop  
	  
   	Missile:
		FREL D 7 A_FaceTarget
		FREL E 7 A_FaceTarget
		FREL F 5 A_FaceTarget
		FREL F 2 BRIGHT A_PainAttack("ChillerSoul")
		FREL ED 7
		Goto See
	  
   Pain:
      FREL G 3
      FREL G 6 A_Pain
      Goto See
   
   Possession:
    TNT1 A 0 A_SetInvulnerable
    FREL G 3
    FREL G 3 A_Pain
    "####" "#" 35 ACS_NamedExecuteAlways("Pos - Flicker effect")
    TNT1 A 0 A_UnSetInvulnerable
    Goto See
	  
	 Pain.Stun:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx ("StunElectrocute", random (-4, 4), random (-4, 4),  random (16, 32), 0, 0)
		FREL G 1 A_Pain
		FREL GGGGGGGGGG 3 A_SpawnItemEx ("StunElectrocute", random (-12, 12), random (-12, 12),  random (16, 52), 0, 0)
		FREL G 1 A_Pain
		FREL GGGGGGGGGG 3 A_SpawnItemEx ("StunElectrocute", random (-12, 12), random (-12, 12),  random (16, 52), 0, 0)
		FREL G 1 A_Pain
		FREL GGGGGGGGGG 3 A_SpawnItemEx ("StunElectrocute", random (-12, 12), random (-12, 12),  random (16, 52), 0, 0)
		FREL G 1 A_Pain
		FREL GGGGGGGGGG 3 A_SpawnItemEx ("StunElectrocute", random (-12, 12), random (-12, 12),  random (16, 52), 0, 0)
		FREL G 1 A_Pain
		FREL GGGGGGGGGG 3 A_SpawnItemEx ("StunElectrocute", random (-12, 12), random (-12, 12),  random (16, 52), 0, 0)
		FREL G 1 A_Pain
		Goto See
	  

Death.Saw:
TNT1 A 0 A_SpawnItemEx("HealthCrueltyBonus", 0, 0, 4, random (-2.5, 2.5), random (-2.5, 2.5), 5)
Death.Cut:
TNT1 A 0 A_SpawnItemEx("HealthCrueltyBonus", 0, 0, 4, random (-2.5, 2.5), random (-2.5, 2.5), 5)


   Death: 
	FREL H 4 A_Scream
	FREL I 3  
	FREL J 3  
  TNT1 A 0 A_Jump(256,"Death.Frost")
   goto Death.Frost
      Stop 
	  
	  Death.Ice:
	Death.Freeze:
	Death.Frost:
	TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)
	TNT1 A 0 A_ChangeFlag("SOLID", 0)
	TNT1 A 0 A_SpawnItem("FrozenFrostElemental")
	Stop
	  
//	  Death.Fatality:
//		TNT1 A 0 A_Pain
//		TNT1 A 0 A_JumpIfIntargetInventory("FistsSelected", 1, 1)
//		Goto Death
//        TNT1 A 0 A_NoBlocking
//		TNT1 A 0 A_GiveToTarget("GoFatality", 1)
//        TNT1 A 0 A_GiveToTarget("PEFatality", 1)
//        Stop
   } 
}

Actor ChillerSoul : LostSoul
{
 Health 66
  Radius 16
  Height 56
  Tag "Chiller Soul"
  DamageFactor "SatanGuard", 0.0
  PainChance "SatanGuard", 0
Damagetype "SatanGuard"
Species "SatanGuard"
  Mass 50
  Speed 7
  FloatSpeed 7
  Damage (15)
  PainChance 100
  Monster
  +NOBLOOD
  +NOBLOODDECALS
  +NoDamageThrust
  +DontHurtSpecies
  Mass 800
  +FLOAT
  +NOGRAVITY
  +MISSILEMORE
  +DONTFALL
  +NOICEDEATH
  +IsMonster
  SeeSOund "chiller/See"
  AttackSound "chiller/attack"
  PainSound "chiller/pain"
  DeathSound "LSOD"
  ActiveSound "chiller/active"
  HitObituary "%o was frostbitten by a Chiller Soul."
  DamageType "Freeze"
  DamageFactor "Ice", 0.0
  DamageFactor "Freeze", 0.0//THE BASTARD CAN'T BE KILLED BY THE FREEZER
   States
    {
	Spawn:
//		TNT1 A 0 ACS_ExecuteAlways(796, 0, 0, 0, 0)//Check if Vanilla Mode is activated
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		CHSL A 2 BRIGHT A_Look
		TNT1 A 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
		CHSL A 0 A_SpawnItemEx("ChillerSoulFrost", 24, 0, random (0, 360), 2, random (0, 160))
		Goto Spawn+2
		
    Spawn2:
		CHSL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 10 BRIGHT A_Look
		Goto Spawn
	 See:
	  CHSL A 3 Bright A_Chase
	  TNT1 A 0 A_Explode(3,65,0)
	  TNT1 A 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
	  TNT1 A 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
	  TNT1 A 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
	  TNT1 A 0 A_JumpIfHealthLower(60,"CloserCheck")
	  Loop
  Missile:
    CHSL B 0 A_JumpIfCloser(512,41)
    CHSL B 1 BRIGHT A_FaceTarget
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT A_FaceTarget
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT A_FaceTarget
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT A_FaceTarget
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT A_CustomMissile("ChillerSoulBall")
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 BRIGHT
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    Goto See
    CHSL BB 5 Bright A_FaceTarget
    CHSL B 0 Bright A_PlaySound("chiller/charge")
    CHSL B 1 Bright A_SkullAttack
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 Bright
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 Bright
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 1 Bright
    CHSL BBBB 0 A_SpawnItemEx("ChillerSoulFrost", random(-3,-13), random(10,-10), random(8, 25), 0, 0, 0.1*Random(5, 20), 0, 160, 0)
    CHSL B 0 Bright A_JumpIfTargetInLOS(3, 80)
    CHSL B 0 A_Jump(24, 3)
    CHSL B 4 Bright
    Goto Missile+46
    CHSL B 0 Bright
    Goto Missile+44
    CHSL B 0 A_Stop
    Goto See
	  Pain:
	   CHSL C 3 Bright A_Pain
	   GoTo See
	Pain.Avoid: 
	  TNT1 A 0
	  TNT1 A 0 A_Jump(255, "AvoidLeft", "AvoidRight")
	  Goto AvoidLeft
	  AvoidLeft:
	    CHSL B 1 A_FaceTarget
	    TNT1 A 0 ThrustThing(angle*256/360+192, 15, 0, 0)
        CHSL B 5 A_FaceTarget
        Goto Missile
	AvoidRight:
	    CHSL B 1 A_FaceTarget
	    TNT1 A 0 ThrustThing(angle*256/360+64, 15, 0, 0)
        CHSL B 5 A_FaceTarget
        Goto Missile
   Death: 
  TNT1 A 0 A_Jump(256,"Death.Frost")
   goto Death.Frost
      Stop 
	  
	  Death.Ice:
	Death.Freeze:
	Death.Frost:
	TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)
	TNT1 A 0 A_ChangeFlag("SOLID", 0)
	TNT1 A 0 A_SpawnItem("FrozenChillerSoul")
	Stop
	}
}

Actor ChillerSoulFrost
{
  Radius 6
  Height 8
  Speed 1
  Damage 0
  RenderStyle Translucent
  Alpha 0.3
  Scale 0.4
  +NoBlockMap
  +NoGravity
  +Missile
  +NoTeleport
  +DontSplash
  States
  {
  Spawn:
    FRST ABCDEFGHIJKLMNO 1 A_FadeOut(0.03)
    Stop
  }
}

Actor ChillerSoulBall
{
  Radius 4
  Height 6
  Speed 15
  Damage 5
  Scale 0.5
  Decal MummyScorch
  Renderstyle Add
  Alpha 0.65
  DamageType ice2
  Seesound "Chiller/Ball"
  Deathsound "Chiller/BallDie"
  Projectile
  +Randomize
  Decal RevenantScorch
  States
  {
  Spawn:
    RCBL A 0 Bright A_BishopMissileWeave
    RCBL AA 1 Bright A_SpawnItemEx("ChillerSoulTrail", 0, Random(2,-2), Random(2,-2), 0, 0, 0, 0, 160)
    RCBL A 0 Bright A_BishopMissileWeave
    RCBL AB 1 Bright A_SpawnItemEx("ChillerSoulTrail", 0, Random(2,-2), Random(2,-2), 0, 0, 0, 0, 160)
    RCBL B 0 Bright A_BishopMissileWeave
    RCBL BB 1 Bright A_SpawnItemEx("ChillerSoulTrail", 0, Random(2,-2), Random(2,-2), 0, 0, 0, 0, 160)
    Loop
  Death:
    RCBL J 4 Bright A_Explode(2,16,1)
    RCBL JJJJJ 0 Bright A_SpawnItemEx ("ChillerSoulTrail", 0, 0, 0, 2, 0, Random(1,-1), Random(0,360), 128, 0)
    RCBL KLMN 4 Bright
    Stop
  }
}

Actor ChillerSoulTrail
{   
  Radius 3
  Height 3
  RenderStyle Add
  Alpha 0.65
  Scale 0.55
  +NoGravity
  +NoBlockMap
  +DontSplash
  +ForceXYBillboard
  States
  {
  Spawn:
    TNT1 A 2
    RCBL CDEFGHI 2 Bright
    Stop 
  }
}

Actor FreezeCheck : Inventory
{
  Inventory.Amount 1
  Inventory.MaxAmount 1
}

///////////////////////////======VANILLA======//////////////////////////////////

Actor Vanilla_FrostElemental : FrostElemental
{
	DropItem "DemonStrengthRune" 5
	States
	{
		Spawn:
      FREL A 10 A_Look
      Loop
	}
}